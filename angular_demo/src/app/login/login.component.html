<div class="login-bg">
  <div class="page-container login-container">
    <img src="assets/img/angular-icon-logo.png" alt="Angular Logo" style="width: 100px; display: block; margin-bottom: 1rem;" class="app-logo" />
    <h2 style="color:#1976d2;text-align:center;margin-bottom:1rem;">Welcome to the Angular Demo!</h2>
    <p style="text-align:center;color:#333;margin-bottom:2rem;font-size:1.1rem;">Sign in or create an account to explore all Angular features.</p>
    <form [formGroup]="loginForm" (ngSubmit)="onLogin()" style="margin-bottom:1.5rem; max-width:350px; width:100%; margin-left:auto; margin-right:auto;">
  <label>Username:<input formControlName="username" class="login-input" data-cy="login-username" /></label><br />
      <label>Password:
        <span style="display:flex; align-items:center;">
          <input [type]="showLoginPassword ? 'text' : 'password'" formControlName="password" class="login-input" />
          <button type="button" (click)="toggleLoginPassword()"
            [style.background]="showLoginPassword ? '#ffeb3b' : null"
            [style.color]="showLoginPassword ? '#333' : null"
            style="margin-left:0.5rem; white-space:nowrap;">
            {{ showLoginPassword ? 'Hide' : 'Show' }}
          </button>
        </span>
      </label><br />
  <button type="submit" [disabled]="loginForm.invalid" class="login-btn" data-cy="login-btn">Login</button>
    </form>
    <ng-container *ngIf="message$ | async as msg">
      <div *ngIf="msg" style="color:#d32f2f;text-align:center;">{{ msg }}</div>
    </ng-container>
    <hr />
    <h2 style="color:#1976d2;text-align:center;margin-bottom:1rem;">Create Account</h2>
    <form [formGroup]="registerForm" (ngSubmit)="onRegister()" style="max-width:350px; width:100%; margin-left:auto; margin-right:auto;">
      <label>Username:<input formControlName="username" class="login-input" /></label><br />
      <label>Password:
        <span style="display:flex; align-items:center;">
          <input [type]="showRegisterPassword ? 'text' : 'password'" formControlName="password" class="login-input" />
          <button type="button" (click)="toggleRegisterPassword()"
            [style.background]="showRegisterPassword ? '#ffeb3b' : null"
            [style.color]="showRegisterPassword ? '#333' : null"
            style="margin-left:0.5rem; white-space:nowrap;">
            {{ showRegisterPassword ? 'Hide' : 'Show' }}
          </button>
        </span>
      </label><br />
      <div style="margin:1rem 0; display:flex; align-items:center;">
        <span style="font-weight:500; margin-right:1.5rem;">Roles:</span>
        <label style="margin-right:1.5rem; display:flex; align-items:center;">
          <input type="radio" formControlName="role" value="user" style="margin-right:0.5rem;" /> User
        </label>
        <label style="display:flex; align-items:center;">
          <input type="radio" formControlName="role" value="admin" style="margin-right:0.5rem;" /> Admin
        </label>
      </div>
      <button type="submit" [disabled]="registerForm.invalid" class="login-btn">Create Account</button>
    </form>
    @if (registerError) {
      <div style="color:#d32f2f;text-align:center;">{{ registerError }}</div>
    }
    @if (registerSuccess) {
      <div style="color:#388e3c;text-align:center;">Account created! You can now log in.</div>
    }
  </div>
</div>
